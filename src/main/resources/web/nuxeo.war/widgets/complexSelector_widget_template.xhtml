<div xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax">

  <c:set var="namespace" value="#{widgetProperty_namespace}" />

  <c:if test="#{widget.mode == 'view'}">

  </c:if>

  <c:if test="#{widget.mode == 'edit'}">

   <c:if test="false">
    <nxu:set var="listener" value="#{widgetProperty_valueChangeListener}" resolveTwice="true">
     <h:inputText value="#{field_0}" valueChangeListener="#{listener}">
       <a4j:support event="onchange" reRender="#{widget.id}_nestedLayout" />
     </h:inputText>
    </nxu:set>
   </c:if>

   <h:inputText value="#{field_0}" valueChangeListener="#{complexSelectorBean.valueChanged}">
     <a4j:support event="onchange" reRender="#{widget.id}_nestedLayout" />
   </h:inputText>

  </c:if>

  <a4j:outputPanel id="#{widget.id}_nestedLayout">
    <nxl:layout name="#{widgetProperty_nestedLayout}" mode="edit" value="#{layoutValue}" />
  </a4j:outputPanel>

</div>